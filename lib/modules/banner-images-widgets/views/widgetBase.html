{%- block items -%}

  {{ apos.log("DATA") }}
  {{ apos.log(data.widget)}}
  {{ apos.log("----------------------------") }}

  {%- set wId = data.widget._id %}

 <!-- Carousel
  ================================================== -->
     <div id="{{ wId}}" class="carousel slide " data-ride="carousel" data-interval="3000">


          <!-- Indicators -->
          <ol class="carousel-indicators">
       {%- for entry in data.widget._pieces -%}
        {# Works whether there's a relationship in the join or not. Normally there always #}
        {# is for slideshows, but just in case someone really hates cropping... -Tom #}
        {%- set image = entry.item or entry -%}
        {%- set relationship = entry.relationship -%}           
            <li data-target="#{{ wId}}" data-slide-to="{{loop.index0}}" class="{% if loop.first %} active {% endif %}"></li>
      {%- endfor -%}

          </ol>


          <div class="carousel-inner" role="listbox">



      {%- for entry in data.widget._pieces -%}
        {# Works whether there's a relationship in the join or not. Normally there always #}
        {# is for slideshows, but just in case someone really hates cropping... -Tom #}
        {%- set image = entry.item or entry -%}
        {%- set relationship = entry.relationship -%}
          <!--<div class="item active">-->
          <!--<div class="item{% if loop.first %} active {% endif %}" style="background-image:
            url({{ apos.attachments.url(image.attachment, { size: data.options.size, crop: relationship }) }})
            {%- if apos.attachments.hasFocalPoint(relationship) -%}
              ; background-position: {{ apos.attachments.focalPointToBackgroundPosition(relationship) }}
            {%- endif -%}
          ">  -->
          <div class="item{% if loop.first %} active {% endif %}">
                <!--<img class="first-slide" src="img/beapBanner.jpg" alt="Security System Installation Company" > -->


                <img class="bootstrap-slide" src="{{ apos.attachments.url(image.attachment, { size: data.options.size, crop: relationship }) }}" alt="{{ image.title }}" >
                <div class="carousel-caption">
                  {%- if image.mainCaption -%}
                    <h1>{{image.mainCaption}}</h1>
                  {%- endif -%}
                  {%- if image.subCaption -%}
                    <p>{{image.subCaption}}</p>
                  {%- endif -%}
                  {%- if image.buttonText -%}
                    <a class="btn btn-lg btn-primary" href="{{image.buttonLink}}" role="button">{{image.buttonText}}</a>
                  {%- endif -%}
                </div>                  
            </div>

      {%- endfor -%}

            <a class="left carousel-control" href="#{{ wId}}" role="button" data-slide="prev">
              <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
              <span class="sr-only">Previous</span>
            </a>
            <a class="right carousel-control" href="#{{ wId}}" role="button" data-slide="next">
              <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
              <span class="sr-only">Next</span>
            </a>
          </div>
      </div>  
      


    {%- endblock -%}